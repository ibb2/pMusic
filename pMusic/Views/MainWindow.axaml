<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:pMusic.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:pMusic.Views"
        xmlns:local="clr-namespace:pMusic.Interface"
        xmlns:shadui="clr-namespace:ShadUI;assembly=ShadUI"
        xmlns:converters="clr-namespace:ShadUI"
        xmlns:iconPacks="https://github.com/MahApps/IconPacks.Avalonia"
        xmlns:controls="clr-namespace:HeroIconsAvalonia.Controls;assembly=HeroIconsAvalonia"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="pMusic.Views.MainWindow"
        x:DataType="vm:MainViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="pMusic">
    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
         to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <vm:MainViewModel />
    </Design.DataContext>
    <Panel>
        <Grid ColumnDefinitions="Auto *">
            <shadui:Sidebar
                Grid.Column="0"
                Width="220"
                MinWidth="60"
                Padding="{Binding #Toggler.IsChecked, Converter={x:Static converters:BooleanConverters.SidebarPadding}}"
                BorderBrush="{DynamicResource BorderColor30}"
                BorderThickness="0,0,1,0"
                Expanded="{Binding #Toggler.IsChecked}">
                <shadui:Sidebar.ExpandEasing>
                    <shadui:EaseInOutBack BounceIntensity="Strong" />
                </shadui:Sidebar.ExpandEasing>
                <shadui:Sidebar.Header>
                    <ToggleButton
                        Name="Toggler"
                        Width="32"
                        Height="32"
                        Padding="8"
                        HorizontalAlignment="{Binding #Toggler.IsChecked, Converter={x:Static converters:BooleanConverters.SidebarTogglerHorizontalAlignment}}"
                        CornerRadius="{DynamicResource LgCornerRadius}"
                        Theme="{DynamicResource SideTogglerTheme}">
                        <Viewbox>
                            <iconPacks:PackIconLucide Kind="PanelLeft"></iconPacks:PackIconLucide>
                        </Viewbox>
                    </ToggleButton>
                </shadui:Sidebar.Header>
                <StackPanel Spacing="4">
                    <shadui:SidebarItem
                        Content="Home"
                        IsChecked="True"
                        Route="dashboard">
                        <shadui:SidebarItem.Icon>
                            <Viewbox>
                                <iconPacks:PackIconLucide Kind="House"></iconPacks:PackIconLucide>
                            </Viewbox>
                        </shadui:SidebarItem.Icon>
                    </shadui:SidebarItem>
                    <shadui:SidebarItem
                        Content="Your Library"
                        Route="theme">
                        <shadui:SidebarItem.Icon>
                            <Viewbox>
                                <iconPacks:PackIconLucide Kind="Library"></iconPacks:PackIconLucide>
                            </Viewbox>
                        </shadui:SidebarItem.Icon>
                    </shadui:SidebarItem>
                    <!-- <Separator Padding="4 16"></Separator> -->
                    <shadui:SidebarItemLabel
                        Margin="8,20,8,8"
                        AsSeparator="True"
                        Text="PLAYLISTS" />
                    <shadui:SidebarItem
                        Content="Liked Songs"
                        Route="avatar"
                        ToolTip.Tip="{Binding $parent[shadui:Sidebar].Expanded, Converter={x:Static converters:BooleanConverters.NullOrString}, ConverterParameter='Avatar'}">
                        <shadui:SidebarItem.Icon>
                            <Viewbox>
                                <iconPacks:PackIconLucide Kind="Heart"></iconPacks:PackIconLucide>
                            </Viewbox>
                        </shadui:SidebarItem.Icon>
                    </shadui:SidebarItem>
                </StackPanel>
            </shadui:Sidebar>
            <StackPanel Grid.Column="1">
                <Grid RowDefinitions="*, Auto">
                    <Grid ColumnDefinitions="Auto, *, Auto" Margin="8, 8 8 2">
                        <StackPanel Orientation="Horizontal">
                            <Button Classes="Icon" BorderThickness="0" Command="{Binding GoBack}">
                                <controls:HeroIcon Foreground="{DynamicResource SukiText}" Type="ChevronLeft"
                                                   Min="True" />
                            </Button>
                            <Button Classes="Icon" BorderThickness="0"
                                    Command="{Binding GoForward}">
                                <controls:HeroIcon Foreground="{DynamicResource SukiText}" Type="ChevronRight"
                                                   Min="True" />
                            </Button>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                            <Button Classes="Home Flat Basic Accent Icon" Command="{Binding GoHome}">
                                <controls:HeroIcon Foreground="{DynamicResource SukiText}" Type="Home" Kind="Solid"
                                                   Margin="0 0 0 4" />
                            </Button>
                            <TextBox Padding="20 12" CornerRadius="30" VerticalAlignment="Center">Search for your musics'</TextBox>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                            <Menu HorizontalAlignment="Center" VerticalAlignment="Center">
                                <MenuItem
                                    CornerRadius="{DynamicResource LgCornerRadius}"
                                    shadui:MenuItemAssist.PopupHorizontalOffset="4"
                                    shadui:MenuItemAssist.PopupPlacement="BottomEdgeAlignedRight"
                                    shadui:MenuItemAssist.PopupVerticalOffset="4" Padding="0">
                                    <MenuItem.Header>
                                        <shadui:Avatar
                                            CornerRadius="{DynamicResource LgCornerRadius}"
                                            Fallback="CN"
                                            IsVisible="{Binding !$parent[shadui:Sidebar].Expanded}"
                                            Opacity="{Binding !$parent[shadui:Sidebar].Expanded, Converter={x:Static converters:BooleanConverters.Opaque}}"
                                            Source="{Binding ThumbnailUrl}">
                                            <shadui:Avatar.Transitions>
                                                <Transitions>
                                                    <DoubleTransition Property="Opacity" Duration="0:0:0.20" />
                                                </Transitions>
                                            </shadui:Avatar.Transitions>
                                        </shadui:Avatar>
                                    </MenuItem.Header>
                                    <shadui:MenuItemAssist.Label>
                                        <TextBlock Classes="Caption Muted" Text="My Account" />
                                    </shadui:MenuItemAssist.Label>
                                    <MenuItem
                                        Width="224"
                                        Header="Profile"
                                        InputGesture="Ctrl + Shift + P" />
                                    <MenuItem Header="Billing" InputGesture="Ctrl + B" />
                                    <MenuItem Header="Settings" InputGesture="Ctrl + S" />
                                    <MenuItem Header="Keyboard shortcuts" InputGesture="Ctrl + K" />
                                    <Separator />
                                    <MenuItem Header="Team" />
                                    <MenuItem Header="Invite users">
                                        <MenuItem Width="128" Header="Email" />
                                        <MenuItem Header="Message" />
                                        <MenuItem Header="More..." />
                                    </MenuItem>
                                    <MenuItem Header="New Team" InputGesture="Ctrl + T" />
                                    <Separator />
                                    <MenuItem Header="Github" />
                                    <MenuItem Header="Support" />
                                    <MenuItem Header="API" IsEnabled="False" />
                                    <Separator />
                                    <MenuItem Header="Log out" InputGesture="Ctrl + Shift + Q"
                                              IsVisible="{Binding IsLoggedIn}"
                                              Command="{Binding LogoutCommand}" />
                                    <Separator />
                                    <MenuItem Classes="Destructive" Header="Delete Account" />
                                </MenuItem>
                            </Menu>
                        </StackPanel>
                    </Grid>
                    <UserControl Grid.Row="1"
                                 Content="{Binding CurrentView, Source={x:Static local:Navigation.Instance}}">
                        <ContentControl.DataTemplates>
                            <DataTemplate DataType="{x:Type vm:HomeViewModel}">
                                <views:HomeView />
                            </DataTemplate>
                            <DataTemplate DataType="{x:Type vm:AlbumViewModel}">
                                <views:AlbumView />
                            </DataTemplate>
                            <DataTemplate DataType="{x:Type vm:ArtistViewModel}">
                                <views:ArtistView />
                            </DataTemplate>
                            <DataTemplate DataType="{x:Type vm:TrackViewModel}">
                                <views:TrackView />
                            </DataTemplate>
                        </ContentControl.DataTemplates>
                    </UserControl>
                </Grid>
            </StackPanel>
        </Grid>
    </Panel>
</Window>